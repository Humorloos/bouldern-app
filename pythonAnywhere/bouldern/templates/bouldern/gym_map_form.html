{% load static %}
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="{% static 'bouldern/css/gym_map.css' %}">
    <style>
        #{{ gym }}_map {
            width: 100%;
            height: 100%;
        }
    </style>
    <title></title>
</head>
<body>
<form action="/bouldern/{{ gym }}/map/" method="post">
    {% csrf_token %}
    <div id="popup" class="ol-popup">
        <a href="#" id="popup-closer" class="ol-popup-closer"></a>
        <div id="popup-content"></div>
        <input type="submit" value="Submit">
    </div>
    {{ formset.management_form }}
    <div id="boulders">
        {% for form in formset %}
            {{ form.coordinates }}
        {% endfor %}
    </div>
</form>

<div id="{{ gym }}_div_map">
    <div id="{{ gym }}_map"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/4.6.5/ol.js"></script>
<script src="{% static 'bouldern/js/map.js' %}"></script>
<script>
    const {{ module }} =
    new MapWidget({
        gym: '{{ gym }}',
        url: "{% static 'bouldern/images/'|add:gym|add:'/hallenplan.png' %}",
        map_width: {{ map_width }},
        map_height: {{ map_height }},
        prefix: '{{ formset.prefix }}',
    });
</script>

</body>
